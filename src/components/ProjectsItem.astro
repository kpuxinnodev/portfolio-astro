---
import SectionLayout from "../layouts/SectionLayout.astro";
import GithubButton from "./buttons/GithubButton.astro";
import NewTabButton from "./buttons/NewTabButton.astro";

// -> JSON with projects
import Projects from "../data/projects.json";

// -> Icons from "/components/icons/projects"
import AstroIcon from "./icons/projects/AstroIcon.astro";
import TailwindIcon from "./icons/projects/TailwindIcon.astro";
import TypeScriptIcon from "./icons/projects/TypeScriptIcon.astro"
import HTMLIcon from "./icons/projects/HTMLIcon.astro"
import CSSIcon from "./icons/projects/CSSIcon.astro"
import JavaScriptIcon from "./icons/projects/JavaScriptIcon.astro"
import NodejsIcon from "./icons/projects/NodejsIcon.astro"
import VuejsIcon from "./icons/projects/VuejsIcon.astro";
import LaravelIcon from "./icons/projects/LaravelIcon.astro"

---

<SectionLayout items="center">
  {
    Projects.PROJECTS.map(
      ({
        title,
        description,
        image,
        tags,
        github,
        githubLink,
        preview,
        previewLink,
      }) => (
        <article class="relative max-w-sm w-80 rounded-lg items-center justify-center shadow bg-gray-800 border-gray-700
        md:max-w-none md:w-auto md:ml-5 md:h-56 md:flex md:flex-row md:border-t md:border-r md:border-b mb-20
        lg:max-w-none lg:w-auto lg:ml-5 lg:h-56 lg:flex lg:flex-row lg:border-t lg:border-r lg:border-b lg:my-14">
          <img
            class="rounded-t-lg w-auto object-cover size-60 mx-auto animate-pulse bg-gray-200
            md:scale-110 md:rounded-lg md:shadow-xl md:shadow-black/40
            lg:scale-110 lg:rounded-lg lg:shadow-xl lg:shadow-black/40"
            src={image}
            alt={image}
            loading="lazy"
            onload="this.classList.remove('animate-pulse', 'bg-gray-200')"
          />
          <div class="h-auto flex flex-col justify-start p-4 leading-normal pt-4
          md:pt-8
          lg:pt-8">
            <h3 class="mb-2 text-2xl font-bold tracking-tight text-white
            md:pl-5
            lg:pl-5">
              {title}
            </h3>
            <p class="mb-3 text-sm font-normal text-gray-400
            md:pl-5
            lg:pl-5">
              {description}
            </p>

            <div class="flex flex-row flex-wrap gap-y-2 pb-12
            md:pl-5
            lg:pl-5">
              
              {tags.map(({ name }) => {
                const IconComponent = {
                  AstroIcon,
                  TailwindIcon,
                  TypeScriptIcon,
                  HTMLIcon,
                  CSSIcon,
                  JavaScriptIcon,
                  NodejsIcon,
                  VuejsIcon,
                  LaravelIcon
                }[name + "Icon"];
                return (
                <p class="font-normal text-gray-400 flex flex-row items-center">
                    <span class="text-xs font-medium me-2 px-2.5 py-0.5 rounded bg-emerald-900 text-emerald-300 flex flex-row items-center gap-x-1">
                      {IconComponent && <IconComponent size="18" />}
                      {name}
                    </span>
                  </p>
                  
                );
              })}
              
            </div>

            <div class="absolute flex flex-row bottom-3 right-3 gap-2
            md:absolute md:flex md:flex-row md:bottom-3 md:right-3 md:gap-2
            lg:absolute lg:flex lg:flex-row lg:bottom-3 lg:right-3 lg:gap-2">
              {github && <GithubButton repo={githubLink} />}
              {preview && <NewTabButton href={previewLink} />}
            </div>
          </div>
        </article>
      )
    )
  }
</SectionLayout>
